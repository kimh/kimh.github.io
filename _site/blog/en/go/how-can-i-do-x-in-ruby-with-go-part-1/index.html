<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>(WIP) Ruby To Go: How can I do X in Ruby with Go? (Part I) | Program Is Made At Night</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="(WIP) Ruby To Go: How can I do X in Ruby with Go? (Part I)" />
<meta name="author" content="kim hirokuni" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I am a programmer who can write decent Ruby and some Javascript." />
<meta property="og:description" content="I am a programmer who can write decent Ruby and some Javascript." />
<link rel="canonical" href="http://localhost:4000/blog/en/go/how-can-i-do-x-in-ruby-with-go-part-1/" />
<meta property="og:url" content="http://localhost:4000/blog/en/go/how-can-i-do-x-in-ruby-with-go-part-1/" />
<meta property="og:site_name" content="Program Is Made At Night" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-05-16T23:39:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="(WIP) Ruby To Go: How can I do X in Ruby with Go? (Part I)" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"kim hirokuni"},"dateModified":"2014-05-16T23:39:00+09:00","datePublished":"2014-05-16T23:39:00+09:00","description":"I am a programmer who can write decent Ruby and some Javascript.","headline":"(WIP) Ruby To Go: How can I do X in Ruby with Go? (Part I)","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/en/go/how-can-i-do-x-in-ruby-with-go-part-1/"},"url":"http://localhost:4000/blog/en/go/how-can-i-do-x-in-ruby-with-go-part-1/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Program Is Made At Night" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Program Is Made At Night</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/blog/7years-in--circleci/">7年在籍したCircleCIを退職しました</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">(WIP) Ruby To Go: How can I do X in Ruby with Go? (Part I)</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2014-05-16T23:39:00+09:00" itemprop="datePublished">May 16, 2014
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>I am a programmer who can write decent Ruby and some Javascript.</p>

<p>These two languages were all I know. I wanted to add Go to my list of programming language, so I started learning Go.</p>

<p>It’s boring to read programming books to study programming languages, so I decided to learn Go by porting some programs written in Ruby.</p>

<p>While I was porting Ruby program to Go, I came to think it is useful if there is a cheatsheet that I can loop up in order to convert idiomatic Ruby code to Go.</p>

<p>Ruby and Go are totally different language, so sometimes it is impossible to simply translate Ruby code to Go.
However, it is possible in most cases to write Go code that is sematically equivalant to Ruby code.</p>

<p>So, here is a <strong><em>How can I do X in Ruby with Go?</em></strong> cheetsheet.</p>

<p>I hope you find it useful.</p>

<h2 id="contents-of-this-artcile">Contents of this artcile</h2>
<h3 id="array-and-enumerable-operation">Array and Enumerable Operation</h3>
<ul>
  <li><a href="#create_array">Create array</a></li>
  <li><a href="#append_an_element_to_array">Append element to array</a></li>
  <li><a href="#concatenate_arrays">Concatenate arrays</a></li>
  <li><a href="#create_multi_dimension_aray">Create multi dimension array</a></li>
  <li><a href="#create_empty_array">Create empty array</a></li>
  <li><a href="#iterate_on_an_array">Iterate on array</a></li>
  <li><a href="#looping_n_times">Looping N times</a></li>
  <li><a href="#clone_array">Clone array</a></li>
  <li><a href="#accessing_elements_of_an_array_by_range">Accessing elements of array by range</a></li>
  <li><a href="#compare_array">Compare array</a></li>
  <li><a href="#check_if_array_includes_an_element">Check if array includes an element</a></li>
</ul>

<h3 id="method-definition">Method Definition</h3>
<ul>
  <li><a href="#define_a_method_with_optional_parameter">Define a method with optional parameter</a></li>
  <li><a href="#define_a_method_with_variable_length_argument">Define a method with variable length arugment</a></li>
</ul>

<h3 id="mathematicoperation">MathematicOperation</h3>
<ul>
  <li><a href="#modular_of_negative_number">Modular of negative number</a></li>
</ul>

<h3 id="misc">Misc</h3>
<ul>
  <li><a href="#nil_checking">Nil checking</a></li>
  <li><a href="#checking_the_class">Checking the class</a></li>
</ul>

<p><a id="array_and_enumerable_operation"></a></p>
<h2 id="array-and-enumerable-operation-1">Array and Enumerable Operation</h2>
<p>Array is very powerful data structure and enumerable is probably the most frequently used object in Ruby.</p>

<p>In Go, we have two different enumerable data structures: <strong>array</strong> and <strong>slice</strong>.
I don’t write about details about them since it is not the goal of this post, but array is low-level data structure that slice refers to.</p>

<p><a id="create_array"></a></p>
<h3 id="create-array">Create array</h3>
<p><strong><em>Ruby:</em></strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">fruits</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"apple"</span><span class="p">,</span> <span class="s2">"banana"</span><span class="p">,</span> <span class="s2">"grape"</span><span class="p">]</span>
</code></pre></div></div>

<p><strong><em>Go:</em></strong></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numbers</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">}</span>
<span class="n">fruits</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"apple"</span><span class="p">,</span> <span class="s">"banana"</span><span class="p">,</span> <span class="s">"grape"</span><span class="p">}</span>
</code></pre></div></div>
<p>In the case of Go, <code class="language-plaintext highlighter-rouge">numbers</code> and <code class="language-plaintext highlighter-rouge">words</code> are <strong>slice</strong>, not <strong>array</strong>. Array is primitive data structure, not frequently used in Go code.
If you want to archive similar things to Ruby array, slice should work for you.</p>

<p><a id="append_an_element_to_array"></a></p>
<h3 id="append-an-element-to-array">Append an element to array</h3>
<p><strong><em>Ruby:</em></strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">numbers</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span>
</code></pre></div></div>

<p><strong><em>Go:</em></strong></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numbers</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">}</span>
<span class="n">numbers</span><span class="o">.</span><span class="nb">append</span><span class="p">(</span><span class="n">numbers</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
</code></pre></div></div>
<p><strong>append</strong> adds elements to slice and <strong><em>return new slice</em></strong>. Therefore, you have to reassign to itself.</p>

<p><a id="concatenate_arrays"></a></p>
<h3 id="concatenate-arrays">Concatenate arrays</h3>
<p><strong><em>Ruby:</em></strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numbers1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">numbers2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">numbers1</span> <span class="o">=</span> <span class="n">numbers1</span> <span class="o">+</span> <span class="n">numbers2</span>
</code></pre></div></div>

<p><strong><em>Go:</em></strong></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numbers1</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">}</span>
<span class="n">numbers2</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="m">4</span><span class="p">,</span><span class="m">5</span><span class="p">,</span><span class="m">6</span><span class="p">}</span>
<span class="n">numbers1</span> <span class="o">=</span> <span class="nb">append</span><span class="p">(</span><span class="n">numbers1</span><span class="p">,</span> <span class="n">numbers2</span><span class="o">...</span><span class="p">)</span>
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">...</code> suffix on the slice indicates that it should be passed as the variadic argument, expanded as each <code class="language-plaintext highlighter-rouge">int</code> elements inside <code class="language-plaintext highlighter-rouge">append</code>.
Thus, this is equivalent to below:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numbers1</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">}</span>
<span class="n">numbers1</span> <span class="o">=</span> <span class="nb">append</span><span class="p">(</span><span class="n">numbers1</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">)</span>
</code></pre></div></div>
<p><a id="create_multi_dimension_aray"></a></p>
<h3 id="create-multi-dimension-array">Create multi dimension array</h3>
<p><strong><em>Ruby:</em></strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">multi_array</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]]</span>
</code></pre></div></div>

<p><strong><em>Go:</em></strong></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">var</span> <span class="n">mul</span> <span class="p">[][]</span><span class="kt">int</span> <span class="o">=</span> <span class="p">[][]</span><span class="kt">int</span><span class="p">{</span> <span class="p">{</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">},</span> <span class="p">{</span><span class="m">4</span><span class="p">,</span><span class="m">5</span><span class="p">,</span><span class="m">6</span><span class="p">}</span> <span class="p">}</span>
</code></pre></div></div>
<p><a id="create_empty_array"></a></p>
<h3 id="create-empty-array">Create empty array</h3>
<p><strong><em>Ruby:</em></strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">array</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div></div>

<p><strong><em>Go:</em></strong></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">var</span> <span class="n">array</span> <span class="p">[]</span><span class="kt">int</span>
</code></pre></div></div>
<p>When slice is declared, but not initialised, the slice points to an array of size 0.</p>

<p><a id="iterate_on_an_array"></a></p>
<h3 id="iterate-on-array">Iterate on array</h3>
<p><strong><em>Ruby:</em></strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">numbets</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span><span class="o">|</span><span class="n">num</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">num</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong><em>Go:</em></strong></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numbers</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">}</span>
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">num</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">numbers</span> <span class="p">{</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>
<p>If you want to access the index while iterating over the slice, replace <code class="language-plaintext highlighter-rouge">_</code> with other variable, for example, <code class="language-plaintext highlighter-rouge">i</code>.</p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numbers</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">}</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">num</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">numbers</span> <span class="p">{</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"index: "</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s">"number: "</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a id="looping_n_times"></a></p>
<h3 id="looping-n-times">Looping N times</h3>
<p><strong><em>Ruby:</em></strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">5</span><span class="p">.</span><span class="nf">times</span> <span class="p">{</span><span class="o">|</span><span class="n">num</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">num</span><span class="p">}</span>
</code></pre></div></div>

<p><strong><em>Go:</em></strong></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">num</span><span class="o">:=</span><span class="m">0</span><span class="p">;</span> <span class="n">num</span> <span class="o">&lt;</span><span class="m">5</span><span class="p">;</span> <span class="n">num</span><span class="o">++</span> <span class="p">{</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a id="clone_array"></a></p>
<h3 id="clone-array">Clone array</h3>
<p><strong><em>Ruby:</em></strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">new_array</span> <span class="o">=</span> <span class="n">old_array</span><span class="p">.</span><span class="nf">clone</span>
</code></pre></div></div>

<p><strong><em>Go:</em></strong></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">new_array</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">old_array</span><span class="p">))</span>
<span class="nb">copy</span><span class="p">(</span><span class="n">new_array</span><span class="p">,</span> <span class="n">old_array</span><span class="p">)</span>
</code></pre></div></div>

<p><a id="accessing_elements_of_an_array_by_range"></a></p>
<h3 id="accessing-elements-of-array-by-range">Accessing elements of array by range</h3>
<p><strong><em>Ruby:</em></strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">numbers</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">numbers</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="mi">3</span><span class="p">]</span>
</code></pre></div></div>

<p><strong><em>Go:</em></strong></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ary</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">5</span><span class="p">}</span>
<span class="n">ary</span><span class="p">[</span><span class="m">0</span><span class="o">:</span><span class="m">4</span><span class="p">]</span>
</code></pre></div></div>
<p>Note that, with <code class="language-plaintext highlighter-rouge">from:to</code>, <code class="language-plaintext highlighter-rouge">to</code> is the index where to end <strong>but not including the index itself</strong>.</p>

<p><a id="compare_array"></a></p>
<h3 id="compare-array">Compare array</h3>
<p><strong><em>Ruby:</em></strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">ary1</span> <span class="o">==</span> <span class="n">ary2</span>
  <span class="nb">puts</span> <span class="s2">"Same array"</span>
<span class="k">end</span>
</code></pre></div></div>

<p><strong><em>Go:</em></strong></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">same</span> <span class="o">:=</span> <span class="no">true</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">elm</span><span class="o">:=</span> <span class="k">range</span> <span class="n">ary1</span> <span class="p">{</span>
   <span class="k">if</span> <span class="n">ary2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">r</span> <span class="p">{</span> <span class="n">same</span> <span class="o">=</span> <span class="no">false</span> <span class="p">}</span>
<span class="p">}</span>

<span class="k">if</span> <span class="n">same</span> <span class="o">==</span> <span class="no">true</span> <span class="p">{</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Same slice"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>
<p>You cannot compare slice in Go. You will get <code class="language-plaintext highlighter-rouge">slice can only be compared to nil</code> error if you try to do that.</p>

<p><a id="check_if_array_includes_an_element"></a></p>
<h3 id="check-if-array-includes-an-element">Check if array includes an element</h3>
<p><strong><em>Ruby:</em></strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fruits</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"apple"</span><span class="p">,</span> <span class="s2">"banana"</span><span class="p">,</span> <span class="s2">"grape"</span><span class="p">]</span>

<span class="k">if</span> <span class="n">fruits</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="s2">"apple"</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"include!"</span>
<span class="k">end</span>
</code></pre></div></div>

<p><strong><em>Go:</em></strong></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">include</span> <span class="o">:=</span> <span class="no">false</span>
<span class="n">fruits</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"apple"</span><span class="p">,</span> <span class="s">"banana"</span><span class="p">,</span> <span class="s">"grape"</span><span class="p">}</span>
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">elm</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">fruits</span> <span class="p">{</span>
  <span class="k">if</span> <span class="n">elm</span> <span class="o">==</span> <span class="s">"apple"</span> <span class="p">{</span>
    <span class="n">include</span> <span class="o">=</span> <span class="no">true</span>
    <span class="k">break</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">if</span> <span class="n">include</span> <span class="o">==</span> <span class="no">true</span> <span class="p">{</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"include!"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="method-definition-1">Method Definition</h2>
<p>There are two things that are equivalant to Ruby’s method in Go: <strong>method</strong> and <strong>function</strong>.
Method is a type of function but requires specific receiver.</p>

<p><a id="define_a_method_with_optional_parameter"></a></p>
<h3 id="define-a-method-with-optional-parameter">Define a method with optional parameter</h3>
<p><strong><em>Ruby:</em></strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">greeting</span><span class="p">(</span><span class="n">word</span><span class="o">=</span><span class="s2">"hello!"</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="n">word</span>
<span class="k">end</span>
</code></pre></div></div>

<p><strong><em>Go:</em></strong></p>

<p>This is not possbile in Go. Go does not support optional parameter in function or method definition.
One workaround is using struct.</p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="n">greetingArg</span> <span class="k">struct</span> <span class="p">{</span> <span class="n">word</span> <span class="kt">string</span> <span class="p">}</span>
<span class="k">func</span> <span class="n">greeting</span><span class="p">(</span><span class="n">opt</span> <span class="n">greetingArg</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">word</span> <span class="o">:=</span> <span class="n">opt</span><span class="o">.</span><span class="n">word</span>
  <span class="k">if</span> <span class="n">word</span> <span class="o">==</span> <span class="s">""</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"hello!"</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">greeting</span><span class="p">(</span><span class="n">greetingArg</span><span class="p">{})</span>
<span class="n">greeting</span><span class="p">(</span><span class="n">greetingArg</span><span class="p">{</span><span class="s">"bye!"</span><span class="p">})</span>
</code></pre></div></div>

<p><a id="define_a_method_with_variable_length_argument"></a></p>
<h3 id="define-a-method-with-variable-length-argument">Define a method with variable length argument</h3>
<p><strong><em>Ruby:</em></strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
  <span class="n">args</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span><span class="o">|</span><span class="n">arg</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">arg</span><span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div>

<p><strong><em>Go:</em></strong></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">foo</span><span class="p">(</span><span class="n">arg</span> <span class="o">...</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">arg</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">arg</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Prinln</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="mathematic-operation">Mathematic Operation</h2>

<p><a id="modular_of_negative_number"></a></p>
<h3 id="modular-of-negative-number">Modular of negative number</h3>
<p>Both Ruby and Go supports modular of negative number. However, their behavior is different.</p>

<p><strong><em>Ruby:</em></strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">-</span><span class="mi">5</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">=&gt;</span> <span class="mi">1</span>
</code></pre></div></div>

<p><strong><em>Go:</em></strong></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">-</span><span class="m">5</span> <span class="o">%</span> <span class="m">3</span> <span class="o">=&gt;</span> <span class="o">-</span><span class="m">2</span>
</code></pre></div></div>

<p>Go follows <strong><em>truncated toward zero</em></strong> for the division of negative number.</p>

<p>If you want to get the same value that Ruby returns, here is how to do this.</p>

<p><strong><em>Go:</em></strong></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">divider</span> <span class="o">:=</span> <span class="m">3</span>
<span class="n">mod</span> <span class="o">:=</span> <span class="o">-</span><span class="m">5</span> <span class="o">%</span> <span class="n">divider</span>
<span class="k">if</span> <span class="n">mod</span> <span class="o">&lt;</span> <span class="m">0</span> <span class="p">{</span>
	<span class="n">mod</span> <span class="o">=</span> <span class="n">mod</span> <span class="o">+</span> <span class="n">divider</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Note that values returnd by Ruby and Go are both mathematically correct. It’s just there are two ways to define negative modulo.</p>

<h2 id="misc-1">Misc</h2>
<p><a id="nil_checking"></a></p>
<h3 id="nil-checking">Nil checking</h3>
<p><strong><em>Ruby:</em></strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">val</span><span class="p">.</span><span class="nf">nil?</span>
  <span class="nb">puts</span> <span class="s2">"val is nil"</span>
<span class="k">end</span>
</code></pre></div></div>

<p><strong><em>Go:</em></strong></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">var</span> <span class="n">str</span> <span class="kt">string</span>
<span class="k">if</span> <span class="n">str</span> <span class="o">==</span><span class="s">""</span> <span class="p">{</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"str is empty"</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">var</span> <span class="n">i</span> <span class="kt">int</span>
<span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="m">0</span> <span class="p">{</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"i is zero"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>When you declear a variable without intialization, the variable is set to zero value for its type.
Below is default zero value for primitive types.</p>

<table>
  <thead>
    <tr>
      <th>Type</th>
      <th style="text-align: center">Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>string</td>
      <td style="text-align: center"><strong>’‘</strong></td>
    </tr>
    <tr>
      <td>int</td>
      <td style="text-align: center"><strong>0</strong></td>
    </tr>
    <tr>
      <td>float</td>
      <td style="text-align: center"><strong>0.0</strong></td>
    </tr>
    <tr>
      <td>boolean</td>
      <td style="text-align: center"><strong>false</strong></td>
    </tr>
    <tr>
      <td>pointer</td>
      <td style="text-align: center"><strong>nil</strong></td>
    </tr>
    <tr>
      <td>interface</td>
      <td style="text-align: center"><strong>nil</strong></td>
    </tr>
    <tr>
      <td>slice</td>
      <td style="text-align: center"><strong>nil</strong></td>
    </tr>
    <tr>
      <td>map</td>
      <td style="text-align: center"><strong>nil</strong></td>
    </tr>
  </tbody>
</table>

<p><a id="checking_the_class"></a></p>
<h3 id="checking-the-class">Checking the class</h3>
<p><strong><em>Ruby:</em></strong></p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">puts</span> <span class="s2">"abc"</span><span class="p">.</span><span class="nf">class</span>
</code></pre></div></div>

<p><strong><em>Go:</em></strong></p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="s">"reflect"</span>

<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">reflect</span><span class="o">.</span><span class="n">TypeOf</span><span class="p">(</span><span class="s">"abc"</span><span class="p">))</span>
</code></pre></div></div>

  </div><a class="u-url" href="/blog/en/go/how-can-i-do-x-in-ruby-with-go-part-1/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Program Is Made At Night</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">kim hirokuni</li><li><a class="u-email" href="mailto:yangkookkim@gmail.com">yangkookkim@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Blog about programming, problem solving, e-scooter, and other random things that I love</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
